<xf:title>Swap Accessory Class</xf:title>

<xf:macro name="selection"
		  arg-equipment="!">
	<label class="character-sheet-mastery-container">
		<input class="mastery-option grid-overlap"
		   type="radio"
		   id="accessory-{$equipment.equipment_id}"
		   name="equipment"
		   value="{$equipment.equipment_id}">
		<div class="character-sheet-mastery grid-overlap">
			<div class="character-sheet-mastery-icon-container grid-overlap" style="background-color: #B0B0B0;">
				<xf:if is="$equipment.icon_url != ''">
					<img src="{$equipment.icon_url}" class="character-sheet-mastery-icon">
				<xf:else />
					<img src="{{ base_url('styles/default/Terrasphere/Charactermanager/missing_img.png', true) }}" class="character-sheet-mastery-icon">
				</xf:if>
			</div>
			<div class="mastery-unselect-overlay grid-overlap"></div>
			<div class="character-sheet-mastery-title">{$equipment.display_name}</div>
		</div>
	</label>
</xf:macro>

<div class="block-container">
	<h1 class="character-sheet-overlay-title">Select New Accessory Class</h1>
	<hr>
	<div class="character-sheet-overlay-stats">
		<ul>
			<li><b>Cost:</b> {$nextCost} {$rankSchema.Currency.title}</li>
			<li><b>Current:</b> {$userVal} {$rankSchema.Currency.title}</li>
			<li><b>After:</b> {$afterVal} {$rankSchema.Currency.title}</li>
		</ul>
	</div>
	
	<xf:form action="{{ link('members/cs/equipment/changeAccessory', $user, {'user_id': $user.user_id}) }}"
			  	method="post"
			  	ajax="true"
				data-xf-init="change-accessory"
			  	data-reset-complete="true"
			  	data-redirect="off">
		<div class="mastery-category">
			<div class="mastery-category-list">
				<xf:macro name="selection" arg-equipment="{$accessory1}" />
				<xf:macro name="selection" arg-equipment="{$accessory2}" />
			</div>
		</div>
		<xf:submitrow icon="Swap Accessory" />
	</xf:form>
</div>

<xf:js src="Terrasphere/Charactermanager/accessory_change.js" addon="Terrasphere/Charactermanager" />